<div class="table-container">
  <div class="mat-elevation-z8">
    <mat-tab-group (selectedTabChange)="matTabSelectionChange($event)">
      <mat-tab>
        <ng-template mat-tab-label>
          <mat-icon inline>clear</mat-icon>
          <span style="margin-left: 5px;">Reset filters</span>
        </ng-template>
      </mat-tab>

      <mat-tab>
        <ng-template mat-tab-label>
          <div *ngIf="filters.name === ''"> Name</div>
          <div *ngIf="filters.name !== ''" class="label-edited"> Name (edited)</div>
        </ng-template>
        <mat-form-field class="example-full-width">
          <input [(ngModel)]="filters.name" matInput (keyup)="applyFilter($event.target.value,'name')"
                 placeholder="Filter by name">
        </mat-form-field>
      </mat-tab>

      <mat-tab>
        <ng-template mat-tab-label>
          <div *ngIf="filters.seed === ''"> Seed</div>
          <div *ngIf="filters.seed !== ''" class="label-edited"> Seed (edited)</div>
        </ng-template>
        <mat-form-field class="example-full-width">
          <mat-select placeholder="Operation type" [(ngModel)]="filters.comparison.seed">
            <mat-option value="gt">Greater than</mat-option>
            <mat-option value="lt">Less than</mat-option>
            <mat-option value="eq">Equal to</mat-option>
            <mat-option value="nq">Different from</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field class="example-full-width" [hidden]="!filters.comparison.seed">
          <input [(ngModel)]="filters.seed" matInput (keyup)="applyFilter($event.target.value,'seed')"
                 placeholder="Filter by seed" type="number">
        </mat-form-field>
      </mat-tab>

      <mat-tab>
        <ng-template mat-tab-label>
          <div *ngIf="filters.learningRate === ''"> Learning Rate</div>
          <div *ngIf="filters.learningRate !== ''" class="label-edited"> Learning Rate (edited)</div>
        </ng-template>
        <mat-form-field class="example-full-width">
          <mat-select placeholder="Operation type" [(ngModel)]="filters.comparison.learningRate">
            <mat-option value="gt">Greater than</mat-option>
            <mat-option value="lt">Less than</mat-option>
            <mat-option value="eq">Equal to</mat-option>
            <mat-option value="nq">Different from</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field class="example-full-width" [hidden]="!filters.comparison.learningRate">
          <input [(ngModel)]="filters.learningRate" matInput (keyup)="applyFilter($event.target.value,'learningRate')"
                 placeholder="Filter by learning rate" type="number">
        </mat-form-field>
      </mat-tab>

      <mat-tab>
        <ng-template mat-tab-label>
          <div *ngIf="filters.batchSize === ''"> Batch Size</div>
          <div *ngIf="filters.batchSize !== ''" class="label-edited"> Batch Size (edited)</div>
        </ng-template>
        <mat-form-field class="example-full-width">
          <mat-select placeholder="Operation type" [(ngModel)]="filters.comparison.batchSize">
            <mat-option value="gt">Greater than</mat-option>
            <mat-option value="lt">Less than</mat-option>
            <mat-option value="eq">Equal to</mat-option>
            <mat-option value="nq">Different from</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field class="example-full-width" [hidden]="!filters.comparison.batchSize">
          <input [(ngModel)]="filters.batchSize" matInput (keyup)="applyFilter($event.target.value,'batchSize')"
                 placeholder="Filter by batch size" type="number">
        </mat-form-field>
      </mat-tab>

      <mat-tab>
        <ng-template mat-tab-label>
          <div *ngIf="filters.nEpochs === ''"> #Epochs</div>
          <div *ngIf="filters.nEpochs !== ''" class="label-edited"> #Epochs (edited)</div>
        </ng-template>
        <mat-form-field class="example-full-width">
          <mat-select placeholder="Operation type" [(ngModel)]="filters.comparison.nEpochs">
            <mat-option value="gt">Greater than</mat-option>
            <mat-option value="lt">Less than</mat-option>
            <mat-option value="eq">Equal to</mat-option>
            <mat-option value="nq">Different from</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field class="example-full-width" [hidden]="!filters.comparison.nEpochs">
          <input [(ngModel)]="filters.nEpochs" matInput (keyup)="applyFilter($event.target.value,'nEpochs')"
                 placeholder="Filter by #Epochs" type="number">
        </mat-form-field>
      </mat-tab>

      <mat-tab>
        <ng-template mat-tab-label>
          <div *ngIf="filters.nInputs === ''"> #Inputs</div>
          <div *ngIf="filters.nInputs !== ''" class="label-edited"> #Inputs (edited)</div>
        </ng-template>
        <mat-form-field class="example-full-width">
          <mat-select placeholder="Operation type" [(ngModel)]="filters.comparison.nInputs">
            <mat-option value="gt">Greater than</mat-option>
            <mat-option value="lt">Less than</mat-option>
            <mat-option value="eq">Equal to</mat-option>
            <mat-option value="nq">Different from</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field class="example-full-width" [hidden]="!filters.comparison.nInputs">
          <input [(ngModel)]="filters.nInputs" matInput (keyup)="applyFilter($event.target.value,'nInputs')"
                 placeholder="Filter by #Inputs" type="number">
        </mat-form-field>
      </mat-tab>

      <mat-tab>
        <ng-template mat-tab-label>
          <div *ngIf="filters.nOutputs === ''"> #Outputs</div>
          <div *ngIf="filters.nOutputs !== ''" class="label-edited"> #Outputs (edited)</div>
        </ng-template>
        <mat-form-field class="example-full-width">
          <mat-select placeholder="Operation type" [(ngModel)]="filters.comparison.nOutputs">
            <mat-option value="gt">Greater than</mat-option>
            <mat-option value="lt">Less than</mat-option>
            <mat-option value="eq">Equal to</mat-option>
            <mat-option value="nq">Different from</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field class="example-full-width" [hidden]="!filters.comparison.nOutputs">
          <input [(ngModel)]="filters.nOutputs" matInput (keyup)="applyFilter($event.target.value,'nOutputs')"
                 placeholder="Filter by #Outputs" type="number">
        </mat-form-field>
      </mat-tab>

      <mat-tab>
        <ng-template mat-tab-label>
          <div *ngIf="filters.nLayers === ''"> #Layers</div>
          <div *ngIf="filters.nLayers !== ''" class="label-edited"> #Layers (edited)</div>
        </ng-template>
        <mat-form-field class="example-full-width">
          <mat-select placeholder="Operation type" [(ngModel)]="filters.comparison.nLayers">
            <mat-option value="gt">Greater than</mat-option>
            <mat-option value="lt">Less than</mat-option>
            <mat-option value="eq">Equal to</mat-option>
            <mat-option value="nq">Different from</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field class="example-full-width" [hidden]="!filters.comparison.nLayers">
          <input [(ngModel)]="filters.nLayers" matInput (keyup)="applyFilter($event.target.value,'nLayers')"
                 placeholder="Filter by #Layers" type="number">
        </mat-form-field>
      </mat-tab>

    </mat-tab-group>


    <table mat-table *ngIf="networkDataSource" [dataSource]="networkDataSource" class="mat-elevation-z8" matSort>

      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Id</th>
        <td mat-cell *matCellDef="let network"> {{ network.id }}</td>
        <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>

      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
        <td mat-cell *matCellDef="let network"> {{ network.name }}</td>
        <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>

      <ng-container matColumnDef="seed">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Seed</th>
        <td mat-cell *matCellDef="let network"> {{ network.seed }}</td>
        <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>

      <ng-container matColumnDef="learningRate">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Learning Rate</th>
        <td mat-cell *matCellDef="let network"> {{ network.learningRate }}</td>
        <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>

      <ng-container matColumnDef="batchSize">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Batch Size</th>
        <td mat-cell *matCellDef="let network"> {{ network.batchSize }}</td>
        <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>

      <ng-container matColumnDef="nEpochs">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>#Epochs</th>
        <td mat-cell *matCellDef="let network"> {{ network.nEpochs }}</td>
        <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>

      <ng-container matColumnDef="nInputs">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>#Inputs</th>
        <td mat-cell *matCellDef="let network"> {{ network.nInputs }}</td>
        <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>

      <ng-container matColumnDef="nOutputs">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>#Outputs</th>
        <td mat-cell *matCellDef="let network" [mat-menu-trigger-for]="contextMenu"> {{ network.nOutputs }}</td>
        <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>

      <ng-container matColumnDef="nLayers">
        <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear>#Layers</th>
        <td mat-cell *matCellDef="let network">
          {{network.layers.length}}
          <fa-icon [icon]="faList" (click)="onContextMenuActionLayerView(network)"></fa-icon>
        </td>
        <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>

      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear>Actions</th>
        <td mat-cell *matCellDef="let network">
          <button mat-icon-button [matMenuTriggerFor]="contextMenu" [matMenuTriggerData]="{item: network}">
            <mat-icon>more_vert</mat-icon>
          </button>
        </td>
        <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>

      <tr mat-header-row class="custom-table-header" *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row class="custom-table-row" *matRowDef="let row; columns: displayedColumns;"></tr>
      <tr mat-footer-row *matFooterRowDef="displayedColumns" class="example-first-footer-row"></tr>

    </table>
    <mat-paginator [pageSizeOptions]="[50, 100]" showFirstLastButtons></mat-paginator>
  </div>
</div>

<span [mat-menu-trigger-for]="contextMenu"></span>

<mat-menu #contextMenu="matMenu">
  <ng-template matMenuContent let-item="item">
    <button mat-menu-item (click)="onContextMenuActionLayerView(item)">View layer-wise configuration</button>
    <button mat-menu-item (click)="onContextMenuActionLogView(item)">View train/test logs</button>
  </ng-template>
</mat-menu>
